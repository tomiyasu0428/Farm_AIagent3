# 2025-07-26 データベース初期化問題とPython環境不一致エラーの解決

## 1. データベース初期化に関する問題

- **症状**:
    - `fields`コレクションに`name: 学校裏①`などのデータが存在せず、データ整合性の問題が発生していた。
    - データベース初期化スクリプト実行時に `ModuleNotFoundError: No module named 'dotenv'` が発生していた。

- **原因**:
    1.  **データ不整合**: メインのデータベース初期化スクリプト (`scripts/init_database.py`) が、豊緑エリアの圃場データを追加するスクリプト (`add_field_data.py`) を呼び出していなかった。
    2.  **Python環境の不一致**: ターミナルで実行される `python3` コマンド (`/opt/homebrew/bin/python3`) と、`pip` でライブラリがインストールされるPython環境 (`/Users/tomiyasuhiroki/.pyenv/shims/pip` が管理する `3.12.7`) が異なっていた。これにより、`pip install` したはずの `python-dotenv` ライブラリがスクリプト実行時に見つけられなかった。

- **対応**:
    1.  `scripts/init_database.py` を修正し、`add_field_data.py` 内の `add_field_data` 関数をインポートして実行するように変更した。これにより、初期化プロセスの一部として豊緑エリアの圃場データがデータベースに正しく投入されるようになった。
    2.  データベース初期化スクリプトの実行コマンドを `python3 scripts/init_database.py` から `python scripts/init_database.py` に変更した。これにより、`pyenv` で管理されている `3.12.7` のPython環境が使用され、インストール済みのライブラリが正しく認識されるようになった。

---
以上。
---